<div class="modal-header">
    <h4 class="modal-title">{{name}}</span>
    </h4>
</div>
<div class="modal-body">
    <div>{{data.config}}</div>
    <hr/>
    <form class="form-inline" role="form">
        <input class="form-control" ng-model="searchText" type="text" placeholder="Search">
    </form>
    <hr/>
    <table class="table table-striped table-bordered table-condensed">
        <tr ng-repeat="config in data.configs | filter:searchText | orderBy:'config.id'">
            <td>
                <table class="table">
                    <tr>
                        <td>{{config.id}}</td>
                        <td>
                            <form class="form-inline" role="form">
                                <div class="btn-group">
                                    <label ng-class="{'btn-success':config.role.isRead,'btn-danger':!config.role.isRead}"
                                           class="btn btn-sm" ng-model="config.role.isRead" btn-checkbox>Read</label>
                                    <label ng-class="{'btn-success':config.role.isWrite,'btn-danger':!config.role.isWrite}"
                                           class="btn btn-sm" ng-model="config.role.isWrite" btn-checkbox>Write</label>
                                </div>
                                <input ng- placeholder="weight" class="form-control input-sm"
                                       ng-model="config.role.weight"
                                       type="number"
                                       style="width: 75px"/>
                            </form>
                        </td>
                        <td>
                        </td>
                    </tr>
                    <tr ng-repeat="ds in config.properties">
                        <td>{{ds.key}}</td>
                        <td ng-class="{'has-warning':(ds.newValue != ds.value || ds.isDelete) }">
                            <input ng-disabled="ds.isDelete" style="{{ds.isDelete?'text-decoration:line-through':''}}"
                                   ng-model="ds.newValue"
                                   class="form-control input-sm"/>
                        </td>
                        <td>
                            <button ng-class="{active : ds.isDelete}" title="Remove Property"
                                    ng-click="ds.isDelete = !ds.isDelete"
                                    class="btn btn-sm btn-danger">
                                <span class="glyphicon glyphicon-minus"></span>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td><input placeholder="" ng-model="config.properties.newKey"
                                   class="form-control input-sm" style="width: 200px"/></td>
                        <td><input placeholder="value" ng-model="config.properties.newValue"
                                   class="form-control input-sm"/></td>
                        <td>
                            <button title="Add Property"
                                    ng-click="addProperty(config.properties,config.id,config.properties.newKey,config.properties.newValue)"
                                    class="btn btn-sm btn-success"><span class="glyphicon glyphicon-plus"></span>
                            </button>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>
<div class="modal-footer">
    <form class="form-inline" role="form">
        <input class="form-control" placeholder="DataSource Id" ng-model="newDsName"/>
        <button class="btn btn-success" ng-click="addDs()">Add DataSource</button>
        <button class="btn btn-primary" ng-click="save()">Save All</button>
        <button class="btn btn-danger" ng-click="close()">Cancel</button>
    </form>
</div>